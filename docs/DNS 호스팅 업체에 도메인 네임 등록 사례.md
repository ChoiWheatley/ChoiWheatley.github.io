---
aliases: 
tags: 
description:
title: DNS 호스팅 업체에 도메인 네임 등록 사례
created: 2024-09-02T11:24:25
updated: 2024-09-02T11:24:57
---

> DNS 호스팅 업체 (카페24)에 DNS를 등록하려고 해. 그런데 백엔드 서버는 Naver Cloud Platform에 있고, 프론트엔드 서비스는 현재 AWS CloudFront에 연결되어 있단 말이지. 이 경우 카페24에 도메인 네임을 등록할때 어떻게 해야할까?

이 상황에서 DNS 호스팅 업체인 카페24에 도메인 네임을 등록하고, 백엔드 서버는 Naver Cloud Platform에, 프론트엔드 서비스는 AWS CloudFront에 연결하려면 DNS 레코드를 적절하게 설정해야 합니다. 여기서 도메인 네임 시스템(DNS)의 주요 역할은 특정 도메인 이름이 어디로 연결되는지를 정의하는 것입니다. 아래는 이 시나리오에 맞는 DNS 설정 방법입니다:

### 1. 백엔드 서버 (Naver Cloud Platform)

백엔드 서버가 Naver Cloud Platform에 있다면, 이 서버의 퍼블릭 IP 주소를 알고 있어야 합니다. 이 퍼블릭 IP 주소를 기반으로 A 레코드를 설정합니다.

- **예시**: `api.yourdomain.com`이라는 서브도메인을 백엔드 서버에 연결하려는 경우
  - **A 레코드**:
    - **호스트 이름**: `api`
    - **타입**: `A`
    - **값**: Naver Cloud Platform의 백엔드 서버 IP 주소

### 2. 프론트엔드 서비스 (AWS CloudFront)

프론트엔드 서비스가 AWS CloudFront에 연결되어 있다면, AWS CloudFront에서 제공하는 배포 도메인 이름을 가지고 있어야 합니다. 이 경우에는 CNAME 레코드를 설정하여 도메인을 CloudFront에 연결할 수 있습니다.

- **예시**: `www.yourdomain.com`을 프론트엔드 서비스에 연결하려는 경우
  - **CNAME 레코드**:
    - **호스트 이름**: `www`
    - **타입**: `CNAME`
    - **값**: CloudFront 배포 도메인 (예: `d1234567890abcdef.cloudfront.net`)

### 3. 루트 도메인 설정 (`yourdomain.com`)

루트 도메인 (`yourdomain.com`)을 프론트엔드 또는 백엔드 중 어디에 연결할지 결정해야 합니다. 보통 프론트엔드에 연결하는 경우가 많습니다. 루트 도메인은 CNAME 레코드를 사용할 수 없으므로 A 레코드 또는 ALIAS 레코드(AWS Route 53의 경우)를 사용해야 합니다.

- **예시**: 루트 도메인을 프론트엔드 서비스에 연결하려는 경우
  - **A 레코드** 또는 **ALIAS 레코드**:
    - **호스트 이름**: `@` (루트 도메인을 의미)
    - **타입**: `A` 또는 `ALIAS`
    - **값**: CloudFront 배포 도메인 또는 Naver Cloud Platform의 IP 주소
    - **참고**: AWS Route 53을 사용하지 않는 경우 루트 도메인을 CloudFront에 직접 연결하는 데는 약간의 제약이 있을 수 있습니다.

### 4. 서브도메인들 설정

필요에 따라 다른 서브도메인들도 적절하게 설정할 수 있습니다. 예를 들어, `blog.yourdomain.com`을 Naver Cloud의 또 다른 서비스로 연결하는 등 다양한 설정이 가능합니다.

### 요약

1. 카페24의 DNS 관리 페이지에서 도메인 네임을 등록합니다.
2. **백엔드 서버**: Naver Cloud Platform의 IP 주소를 가리키는 A 레코드를 설정합니다.
3. **프론트엔드 서비스**: AWS CloudFront 배포 도메인으로 가리키는 CNAME 레코드를 설정합니다.
4. **루트 도메인**을 어디에 연결할지 결정하고, 필요에 따라 A 레코드 또는 ALIAS 레코드를 설정합니다.
5. 기타 서브도메인도 필요에 따라 추가로 설정합니다.

이렇게 설정하면, 사용자가 `yourdomain.com`이나 `www.yourdomain.com`과 같은 도메인으로 접근할 때, 각각 백엔드와 프론트엔드 서버로 올바르게 연결되게 됩니다.

> 네임서버 4개를 입력하라고 하는데 그건 DNS 레코드 타입 중 어디에 해당해?

네임서버(Name Server)는 DNS 레코드 타입 중 **NS 레코드**에 해당합니다. NS 레코드는 도메인 네임 시스템(DNS)에서 특정 도메인이나 서브도메인에 대한 쿼리를 처리할 권한이 있는 DNS 서버를 지정하는 데 사용됩니다. 

### 네임서버와 NS 레코드

- **NS 레코드 (Name Server Record)**: 특정 도메인이 어떤 네임서버에 의해 관리되고 있는지를 나타내는 레코드입니다. 이 레코드는 도메인에 대한 모든 DNS 조회가 지정된 네임서버로 전달되도록 합니다.

### 네임서버 설정 시의 역할

카페24와 같은 DNS 호스팅 서비스에서 도메인을 등록할 때, 4개의 네임서버를 입력하라는 요청을 받을 수 있습니다. 이 4개의 네임서버는 다음과 같은 역할을 합니다:

1. **주 네임서버 (Primary Name Server)**: 도메인의 기본 네임서버로, DNS 쿼리를 처리하는 첫 번째 서버입니다.
2. **보조 네임서버 (Secondary Name Servers)**: 주 네임서버가 응답하지 않거나 사용할 수 없을 때, 쿼리를 처리하기 위해 준비된 추가적인 네임서버입니다. 이들은 주 네임서버와 동일한 권한을 가지며, 주 네임서버의 백업 역할을 합니다.

### 왜 4개의 네임서버를 입력해야 하나?

네임서버는 도메인에 대한 가용성과 안정성을 보장하기 위해 여러 개 설정하는 것이 일반적입니다. 보통 4개의 네임서버를 제공하는 이유는 다음과 같습니다:

1. **장애 발생 시 대비**: 하나의 네임서버가 다운되거나 문제가 발생하더라도, 나머지 네임서버가 계속해서 도메인 이름을 해결할 수 있도록 합니다.
2. **지리적 분산**: 네임서버는 전 세계 여러 위치에 분산되어 있는 경우가 많아, 사용자에게 더 빠르게 응답할 수 있습니다.
3. **부하 분산**: 여러 네임서버가 DNS 쿼리의 부하를 나눠서 처리하므로, 트래픽이 한 곳에 집중되지 않고 분산됩니다.

### 요약

- **NS 레코드**는 도메인을 관리하는 네임서버를 지정하는 데 사용됩니다.
- 카페24와 같은 DNS 호스팅 서비스에서 네임서버 4개를 입력하라는 요청은 도메인에 대한 가용성, 안정성, 그리고 빠른 응답성을 보장하기 위함입니다.
- 이 네임서버들은 NS 레코드에 설정되며, 해당 도메인의 DNS 쿼리를 처리하게 됩니다.

따라서, 네임서버 4개를 입력하는 것은 NS 레코드를 설정하는 작업과 직접적으로 관련이 있습니다.
