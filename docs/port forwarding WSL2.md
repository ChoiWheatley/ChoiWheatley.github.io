---
aliases: 
tags: 
description:
title: port forwarding WSL2
created: 2023-09-16T13:01:58
updated: 2023-09-18T00:38:24
---

## TL;DR

```PowerShell
netsh interface portproxy add v4tov4 listenport=<listenport> listenaddress=0.0.0.0 connectport=<connectport> connectaddress=$(wsl -d <distro-name> hostname -I)
```

[[ssh into WSL2 & vs-code]]ì™€ ë‹¤ë¥¸ì ì´ë¼ê³  ë§í•œë‹¤ë©´ Power Shell ê´€ë¦¬ì ëª¨ë“œì—ì„œ `netsh` ëª…ë ¹ì–´ë¥¼ ì§ì ‘ ì³ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. SSHì˜ ê²½ìš° 22ë²ˆ í¬íŠ¸ë¥¼ ì—´ì–´ì£¼ì–´ì•¼ í•˜ëŠ”ë°, ìœˆë„ìš°ì—ì„œ 22ë²ˆ í¬íŠ¸ë¥¼ ì—´ì–´ì£¼ë©´ VSCodeì—ì„œ ì•Œì•„ì„œ í¬íŠ¸ í¬ì›Œë”©ì„ í•´ ì£¼ëŠ” ê²ƒ ê°™ì•˜ë‹¤. 

## Try

[[week06 {swjungle}{proxy-lab}]]ì‹¤ìŠµì„ í•˜ë ¤ëŠ”ë° ì„ì˜ì˜ í¬íŠ¸ë¥¼ í•˜ë‚˜ ì—´ì–´ì„œ ê·¸ìª½ìœ¼ë¡œ ë“¤ì–´ê°€ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í–ˆë‹¤

1. ê³µìœ ê¸° ì„¤ì •ì— í¬íŠ¸í¬ì›Œë”©ì„ ì„¤ì •í•´ ì£¼ì—ˆë‹¤. ì´ì œ ë„ë©”ì¸ ë„¤ì„ ë’¤ì— í¬íŠ¸ë²ˆí˜¸ë¥¼ ë¶™ì—¬ì£¼ë©´ ìë™ìœ¼ë¡œ ë‚´ ì»´í“¨í„°ë¡œ ë¦¬ë””ë ‰ì…˜ ëœë‹¤.
2. ì»´í“¨í„° ì•ˆì—ì„œ êµ¬ì²´ì ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì°¾ì•„ê°€ì•¼ í•˜ê¸° ë•Œë¬¸ì— [ms ê³µì‹ë¬¸ì„œ](https://learn.microsoft.com/en-us/windows/wsl/networking) ë¥¼ ì°¸ì¡°í•´ WSLì´ ì‚¬ìš©í•˜ê³  ìˆëŠ” ë‚´ë¶€ IPë¡œ í¬ì›Œë”©ì„ í•´ ì£¼ì—ˆë‹¤. â†’ ì—¬ê¸°ì—ì„œ ë°œìƒí•œ ë¬¸ì œì˜€ìŒ
3. tiny web serverë¥¼ ì‚¬ì „ì— í¬ì›Œë”©í•œ í¬íŠ¸ë¡œ ì‹¤í–‰ì‹œì¼°ê³ , ë¨¼ì € RDPë¡œ ì—°ê²°í•´ ë“¤ì–´ê°€ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ `localhost:portnum`ìœ¼ë¡œ ì³ì„œ ë“¤ì–´ê°€ë‹ˆ ì„±ê³µì ìœ¼ë¡œ í™”ë©´ì´ ì¶œë ¥ëë‹¤.
4. ì´ì œ ì›ê²©ì§€(ëŒ€ì „)ì—ì„œ ë³¸ê°€ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ê³  í¬íŠ¸ë¥¼ í•¨ê»˜ ë„£ì–´ì£¼ì—ˆëŠ”ë°... connection timeoutì´ ë‚˜ì™”ê³ , í„°ë¯¸ë„ì—ëŠ” ì•„ë¬´ê²ƒë„ ëœ¨ì§€ ì•Šì•˜ë‹¤.

## Catch

ë³´ë‹ˆê¹Œ, ë‚´ê°€ ê°€ì§€ê³  ìˆëŠ” WSL ì¸ìŠ¤í„´ìŠ¤ê°€ í•œ ê°œê°€ ì•„ë‹ˆì—ˆë˜ ê²ƒì´ë‹¤. ë‚´ê°€ ì‚¬ìš©í•˜ê³  ìˆë˜ê±´ ìµœê·¼ì— ê³¼ì œ ìš”êµ¬ì‚¬í•­ì— ë§ì¶”ê¸° ìœ„í•´ ìƒˆë¡œ í•˜ë‚˜ ì„¤ì¹˜í•œ `Ubuntu-22.04`ì˜€ê³ , MS ê³µì‹ë¬¸ì„œê°€ ì•ˆë‚´í•´ì¤€ ëª…ë ¹ì–´ `wsl hostname -i`ì˜ ê²°ê³¼ê°’ê³¼ `Ubuntu-22.04`ì— í• ë‹¹ëœ IPì˜ ê°’ì´ ì„œë¡œ ë‹¬ë¼ ì—‰ëš±í•œ ê³³ìœ¼ë¡œ í¬ì›Œë”©ì„ í•´ì¤€ ê²ƒì´ì—ˆë‹¤.

```powershell
PS>wsl -l -v
  NAME                   STATE           VERSION
* Ubuntu-22.04           Running         2
  docker-desktop         Stopped         2
  Ubuntu                 Stopped         2
  docker-desktop-data    Stopped         2
```

ê·¸ë˜ì„œ [Stack Exchange](https://superuser.com/a/1603307) ëŒ€í™”ë¥¼ ì°¸ì¡°í•´ êµ¬ì²´ì ì¸ wsl ë””ìŠ¤íŠ¸ë¡œë¥¼ ëª…ì‹œí•œ IP ì£¼ì†Œë¥¼ ë‹¬ë¼ê³  í•˜ë‹ˆ ê·¸ì œì„œì•¼ ì œëŒ€ë¡œ ëœ ê°’ì´ ë‚˜ì™”ê³ , ì‹¤ì œë¡œ wsl ì•ˆì—ì„œ `ip addr show | grep eth0`ìœ¼ë¡œ ë‚˜ì˜¨ ì£¼ì†Œê°’ê³¼ ì¼ì¹˜í–ˆë‹¤.

## Easy Way

ê·¸ëƒ¥ VScodeì—ì„œ Portë¥¼ ì—´ì–´ë²„ë¦¬ë‹ˆê¹Œ localhostì—ì„œ ê·¸ëƒ¥ ì—´ë¦¬ë„¤... ğŸ’¦

![[ìŠ¤í¬ë¦°ìƒ· 2023-09-18 ì˜¤ì „ 12.37.28.png]]
